{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CyberNetCall</title>
  <link rel="manifest" href="{% static 'cnc/manifest.json' %}">
  <!-- Standard favicon -->
  <link rel="icon" href="{% static 'cnc/icons/favicon.ico' %}" sizes="any">
  <!-- Apple Touch Icon (for iOS home screen) -->
  <link rel="apple-touch-icon" href="{% static 'cnc/icons/apple-touch-icon.png' %}">
  <!-- CSS -->
  <link rel="stylesheet" href="{% static 'cnc/style.css' %}">
  <!-- External Libraries (defer loading) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js" defer></script>
  <script src="https://unpkg.com/idb@7/build/umd.js" defer></script>
  <script src="https://unpkg.com/html5-qrcode" defer></script>
  <!-- Application Script -->
  <script src="{% static 'cnc/app.js' %}" defer></script>
</head>
<body>
  <!-- Main application container for layout -->
  <div class="app-container">

    <!-- Header Area -->
    <header class="app-header">
      <h1>CyberNetCall</h1>
      <div id="connectionStatus" class="connection-status"></div>
    </header>

    <!-- Main Content Area (Video + Controls) -->
    <main class="main-content">
      <!-- Video Meeting Section -->
      <section class="section video-meeting-section">
        <h2>Video Meeting</h2>
        <div class="video-container">
          <div class="video-wrapper">
             <video id="remoteVideo" autoplay playsinline></video>
             <span class="video-label">Remote</span>
          </div>
          <div class="video-wrapper local-video-wrapper">
             <video id="localVideo" autoplay muted playsinline></video>
             <span class="video-label">Local</span>
          </div>
        </div>
        <div class="call-controls">
          <button id="callButton" aria-label="Start/End Call">ðŸ“ž Call</button>
          <button id="videoButton" aria-label="Toggle Video" style="display: none;">ðŸŽ¥ Video On</button>
          <!-- File sending UI (basic) -->
          <div class="file-share">
              <label for="fileInput" class="visually-hidden">Share File</label>
              <input type="file" id="fileInput" aria-label="Select file to send">
              <button id="sendFile">Send File</button>
          </div>
        </div>
      </section>

      <!-- Connection Setup Area (QR Code / Scanner) -->
      <section id="connection-setup" class="section connection-setup-section">
         <h2>Connection Setup</h2>
         <p>Scan the QR code or let your peer scan yours.</p>
         <canvas id="qrcode"></canvas>
         <div id="qr-reader"></div>
         <div id="qr-reader-results"></div>
      </section>
    </main>

    <!-- Sidebar/Aside Area (Chat + Posts) -->
    <aside class="sidebar">
      <!-- Direct Mail Section -->
      <section class="section chat-section">
        <h2>Direct Mail</h2>
        <div id="messageArea" class="message-area"></div>
        <div class="input-area">
          <label for="messageInput" class="visually-hidden">Direct Message</label>
          <input type="text" id="messageInput" placeholder="Type a message..." aria-label="Direct Message">
          <button id="sendMessage">Send</button>
        </div>
      </section>

      <!-- Group Chat Section -->
      <section class="section post-section">
        <h2>Group Chat</h2>
         <div id="postArea" class="post-area"></div>
        <div class="input-area">
          <label for="postInput" class="visually-hidden">Post Content</label>
          <input type="text" id="postInput" placeholder="Write your post..." aria-label="Post Content">
          <button id="sendPost">Post</button>
        </div>
      </section>
    </aside>

  </div> <!-- End of app-container -->

</body>
</html>
